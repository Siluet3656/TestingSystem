@model CreateObjectiveViewModel

<h2>Создать задачу</h2>

<form method="post">
    <div class="mb-3">
        <label>Название</label>
        <input asp-for="Title" class="form-control"/>
    </div>

    <div class="mb-3">
        <label>Описание</label>
        <textarea asp-for="Description" rows="5" class="form-control"></textarea>
    </div>

    <h4>Тесты</h4>
    <div id="tests">
        @for (int i = 0; i < Model.Tests.Count; i++)
        {
            <div class="border p-3 mb-3">
                <div class="mb-2">
                    <label>Input</label>
                    <textarea name="Tests[@i].Input" class="form-control">@Model.Tests[i].Input</textarea>
                </div>
                <div class="mb-2">
                    <label>Expected Output</label>
                    <textarea name="Tests[@i].ExpectedOutput" class="form-control">@Model.Tests[i].ExpectedOutput</textarea>
                </div>
                <div class="mb-2 form-check">
                    <input type="checkbox" class="form-check-input" name="Tests[@i].IsHidden" value="true" @(Model.Tests[i].IsHidden ? "checked" : "") />
                    <label class="form-check-label">Скрытый тест</label>
                </div>
            </div>
        }
    </div>

    <button type="button" class="btn btn-secondary" onclick="addTest()">Добавить тест</button>
    <button type="submit" class="btn btn-primary">Создать задачу</button>
</form>

<script>
    function addTest() {
        const index = document.querySelectorAll("#tests > div").length;
        const html = `
    <div class="border p-3 mb-3">
        <div class="mb-2">
            <label>Input</label>
            <textarea name="Tests[${index}].Input" class="form-control"></textarea>
        </div>
        <div class="mb-2">
            <label>Expected Output</label>
            <textarea name="Tests[${index}].ExpectedOutput" class="form-control"></textarea>
        </div>
        <div class="mb-2 form-check">
            <input type="checkbox" class="form-check-input" name="Tests[${index}].IsHidden" value="true"/>
            <label class="form-check-label">Скрытый тест</label>
        </div>
    </div>`;
        document.getElementById("tests").insertAdjacentHTML("beforeend", html);
    }
</script>
